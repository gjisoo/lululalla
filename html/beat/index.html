<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>좌우 피하기 - 모바일 HTML5</title>
<style>
  :root { color-scheme: light dark; }
  html, body { height: 100%; margin: 0; padding: 0; background:#0b0f14; font-family: system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, sans-serif; }
  #wrap { position: fixed; inset: 0; display: grid; grid-template-rows: 1fr auto; place-items: center; }
  canvas { width: 100%; height: 100%; touch-action: none; display: block; background: #120d0d; border-radius: 18px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6); image-rendering: pixelated; max-width: 100%; max-height: 100%; }
  .hud {
    position: absolute; left: 0; right: 0; top: 0; display:flex; justify-content:space-between;
    padding: env(safe-area-inset-top) 16px 8px; color:#cde3ff; font-weight:700; text-shadow:0 2px 8px rgba(0,0,0,.6);
    pointer-events: none; user-select: none;
  }
  .hud .pill { background: rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.15); padding: 6px 10px; border-radius: 999px; }
  .controls { position: relative; display:flex; gap: 8px; padding: 12px env(safe-area-inset-right) calc(12px + env(safe-area-inset-bottom)) env(safe-area-inset-left); background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.35)); }
  .btn {
    flex: 1; font-size: clamp(18px, 4.3vmin, 28px); font-weight: 800;
    background: rgba(255,255,255,.08); color: #e8f1ff; border:1px solid rgba(255,255,255,.18);
    border-radius: 16px; padding: 16px 0; backdrop-filter: blur(8px);
    text-align: center; user-select: none;
  }
  .btn:active { transform: scale(.98); background: rgba(255,255,255,.18); }
  .centerOverlay {
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:auto;
  }
  .dialog {
    text-align:center; color:#e8f1ff; background: rgba(15,18,26,.8);
    padding: 20px; border-radius: 16px; border:1px solid rgba(255,255,255,.1);
    box-shadow: 0 8px 40px rgba(0,0,0,.5);
    max-width: 90vw;
  }
  .dialog h1 { margin: 0 0 8px; font-size: clamp(22px, 6.5vmin, 36px); }
  .dialog p { margin: 6px 0 14px; opacity: .9 }
  .dialog .row { display:flex; gap: 8px; }
  .dialog button {
    appearance: none; border: 0; padding: 12px 16px; border-radius: 12px; font-weight: 800;
    background:#4f8df7; color:white; flex:1;
  }
  .dialog button.secondary { background: rgba(255,255,255,.12); color:#e8f1ff; border:1px solid rgba(255,255,255,.2); }
  /* 모바일 화면에 맞게 수정 */
  .btnpad {
    position: fixed;
    bottom: 10%;
    width: 100%;
    display: flex;
    justify-content: space-around;
    padding: 0 10px;
  }
  .tap {
    flex: 1;
    height: 50px;
    margin: 0 5px;
    border: none;
    border-radius: 16px;
    background: rgba(255, 255, 255, 0.06);
    color: #ffdca8;
    font: 800 18px/1 system-ui;
    text-align: center;
  }
  .tap:active {
    background: rgba(255, 255, 255, 0.12);
  }
  #startScreen {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(0, 0, 0, 0.8);
    z-index: 10;
  }
  #startBtn {
    padding: 16px 32px;
    border: none;
    border-radius: 12px;
    background: #ffdca8;
    color: #241712;
    font: 700 18px system-ui;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  }
</style>
</head>
<body>
<div id="wrap">
  <canvas id="game" aria-label="좌우 피하기 게임 캔버스" role="img"></canvas>

  <div class="hud">
    <div class="pill" id="score">점수 0</div>
    <div class="pill" id="speed">속도 1.0x</div>
  </div>

  <div class="centerOverlay" id="overlay" style="display:none;">
    <div class="dialog">
      <h1 id="title">좌우 피하기</h1>
      <p id="subtitle">왼쪽/오른쪽을 눌러 레인을 이동하며 장애물을 피해요.<br/>스와이프도 됩니다!</p>
      <div class="row">
        <button id="startBtn">시작</button>
        <button class="secondary" id="vibeBtn">진동 <span id="vibeState">On</span></button>
      </div>
    </div>
  </div>

  <div class="controls" id="controls">
    <div class="btn" id="leftBtn" aria-label="왼쪽으로 이동">◀ 왼쪽</div>
    <div class="btn"
    </div>
  </div>

  <div id="startScreen">
    <button id="startBtn">시작하기</button>
  </div>

  <script>
    let running = false; // 게임 상태 변수 추가

    const startScreen = document.getElementById('startScreen');
    const startBtn = document.getElementById('startBtn');

    startBtn.addEventListener('click', () => {
      startScreen.style.display = 'none'; // 시작 화면 숨기기
      running = true; // 게임 시작
      requestAnimationFrame(step); // 게임 루프 시작
    });

    function step() {
      if (!running) return; // 게임이 시작되지 않으면 루프 중단

      // 게임 로직 추가 (예: 캔버스 그리기, 상태 업데이트 등)
      console.log('게임이 실행 중입니다.');

      requestAnimationFrame(step); // 다음 프레임 요청
    }
  </script>
</body>
</html>
